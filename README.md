# slurm-ansible

## Данный "проект" - это решение задачи Devops Upgrade, Комфорт. Поток 8 ( https://edu.slurm.io/courses/devops_upgrade_comfort8/units/6218/lessons/24525/steps/81939 )

Недочеты :

0. плейбук жестко привязан к ОС CentOS 7.9

1. согласно заданию nginx роль должна была быть из ansible-galaxy
    - решил сделать свою , т.к. нужно больше практики в написании ролей и тасок
    - ИБ не пропустило бы на текущй работе использование не проверенной роли
    - все роли найденные в git были или избыточны ( для всех ОС сразу ) или примитивными ( подключаем epel и ставим )
    - также в ролях nginx не было открытие портов ( а нужно ли это , вопрос , а у меня есть =P )

2. роль postgre не идемпотентна
    - при повторном запуске при уже существующей БД и pg_hba.conf таска не может зацепиться
    - попробовать написать таску проверки существования БД и обработку создания БД запихать в блок , если нет то создаем если есть пропускаем блок
  
3. отключаю SELinux и ребутаю ВМ , что не очень хорошо с точки зрения ИБ

## Посмотреть выполнение плейбука можно тут

https://www.youtube.com/watch?v=PqNSA4OGp4c
